#!/usr/bin/env node

const mergedirs = require('merge-dirs').default;
const exec = require('child_process').exec;

const command = process.argv[2];
const path = require('path');
const pwd = path.resolve();
const src = '/Users/mpetrovich/Code/NBS/cypress-scenario-runner/cypress'; //path.resolve('node_modules', 'cypress-scenario-runner', 'cypress');
const defaultDest = path.resolve(pwd, 'cypress');
const dest = process.argv[3] ? path.resolve(process.argv[3]) : defaultDest;

if (command === 'install') {
	mergedirs(src, dest, 'skip');
}
else if (command === 'update') {
	mergedirs(src, dest, 'overwrite');
}
else if (command === 'uninstall') {
	exec(`rm -rf ${dest}/*/cypress-scenario-runner/`);
}
else {
	console.log('Unsupported command: ' + command);
}
